# 📱 AI智能题库系统 - 前端完整开发指南

> **版本：** V2.0  
> **更新日期：** 2025-10-14  
> **技术栈：** React Native + HTML5 + TypeScript

---

## 📑 目录

1. [移动端开发](#1-移动端开发-react-native)
2. [Web静态页面](#2-web静态页面)
3. [Web管理后台](#3-web管理后台-规划中)
4. [UI设计规范](#4-ui设计规范)
5. [开发工作流](#5-开发工作流)

---

## 1. 移动端开发 (React Native)

### 1.1 项目概述

**技术栈：**
- React Native 0.82 + TypeScript
- React Navigation 6（导航）
- Redux Toolkit（状态管理）
- React Query + tRPC Client（数据获取）
- React Native Paper（UI组件）
- AsyncStorage（本地存储）
- CodePush（热更新）

**支持平台：**
- ✅ iOS 10.0+
- ✅ Android 5.0+

### 1.2 项目结构

```
packages/mobile/
├── src/
│   ├── screens/              # 页面组件
│   │   ├── auth/            # 认证页面
│   │   │   ├── LoginScreen.tsx
│   │   │   ├── RegisterScreen.tsx
│   │   │   └── ForgotPasswordScreen.tsx
│   │   │
│   │   ├── home/            # 首页
│   │   │   ├── HomeScreen.tsx
│   │   │   └── NotificationScreen.tsx
│   │   │
│   │   ├── practice/        # 练习模块
│   │   │   ├── PracticeModeScreen.tsx    # 练习模式选择
│   │   │   ├── QuestionScreen.tsx        # 答题页面
│   │   │   ├── MemorizeScreen.tsx        # 背题模式
│   │   │   └── ResultScreen.tsx          # 练习结果
│   │   │
│   │   ├── exam/            # 考试模块
│   │   │   ├── ExamListScreen.tsx
│   │   │   ├── ExamDetailScreen.tsx
│   │   │   ├── ExamScreen.tsx
│   │   │   └── ExamResultScreen.tsx
│   │   │
│   │   ├── wrong/           # 错题集
│   │   │   ├── WrongListScreen.tsx
│   │   │   └── WrongDetailScreen.tsx
│   │   │
│   │   ├── analytics/       # 学习分析
│   │   │   ├── LearningCurveScreen.tsx
│   │   │   ├── RadarChartScreen.tsx
│   │   │   └── ReportScreen.tsx
│   │   │
│   │   ├── social/          # 社交功能
│   │   │   ├── LeaderboardScreen.tsx
│   │   │   ├── PKBattleScreen.tsx
│   │   │   └── ForumScreen.tsx
│   │   │
│   │   └── profile/         # 个人中心
│   │       ├── ProfileScreen.tsx
│   │       ├── SettingsScreen.tsx
│   │       └── AboutScreen.tsx
│   │
│   ├── components/          # 通用组件
│   │   ├── common/          # 基础组件
│   │   │   ├── Button.tsx
│   │   │   ├── Loading.tsx
│   │   │   ├── Empty.tsx
│   │   │   └── ErrorBoundary.tsx
│   │   │
│   │   ├── question/        # 题目相关组件
│   │   │   ├── QuestionCard.tsx
│   │   │   ├── ChoiceOption.tsx
│   │   │   ├── AnswerCard.tsx
│   │   │   └── ExplanationCard.tsx
│   │   │
│   │   └── navigation/      # 导航组件
│   │       ├── TabBar.tsx
│   │       └── Header.tsx
│   │
│   ├── navigation/          # 导航配置
│   │   ├── RootNavigator.tsx
│   │   ├── AuthNavigator.tsx
│   │   ├── MainTabNavigator.tsx
│   │   └── types.ts
│   │
│   ├── store/               # Redux状态管理
│   │   ├── index.ts
│   │   └── slices/
│   │       ├── authSlice.ts
│   │       ├── practiceSlice.ts
│   │       ├── examSlice.ts
│   │       └── settingsSlice.ts
│   │
│   ├── services/            # API服务
│   │   ├── trpc.ts         # tRPC客户端配置
│   │   └── api.ts          # REST API封装
│   │
│   ├── utils/               # 工具函数
│   │   ├── storage.ts      # 本地存储
│   │   ├── formatters.ts   # 格式化工具
│   │   └── validators.ts   # 验证工具
│   │
│   ├── hooks/               # 自定义Hooks
│   │   ├── useAuth.ts
│   │   ├── usePractice.ts
│   │   └── useTheme.ts
│   │
│   ├── types/               # TypeScript类型
│   │   └── index.ts
│   │
│   ├── constants/           # 常量配置
│   │   └── index.ts
│   │
│   ├── assets/              # 静态资源
│   │   ├── images/
│   │   ├── fonts/
│   │   └── icons/
│   │
│   └── App.tsx              # 应用入口
│
├── android/                 # Android原生代码
├── ios/                     # iOS原生代码
├── package.json
└── tsconfig.json
```

### 1.3 环境配置

#### 1.3.1 安装依赖

```bash
cd packages/mobile

# 安装核心依赖
npm install @react-navigation/native @react-navigation/native-stack @react-navigation/bottom-tabs
npm install react-native-screens react-native-safe-area-context
npm install @reduxjs/toolkit react-redux
npm install @tanstack/react-query
npm install @trpc/client @trpc/react-query

# 安装UI组件库
npm install react-native-paper
npm install react-native-vector-icons
npm install react-native-svg

# 安装功能库
npm install @react-native-async-storage/async-storage
npm install react-native-image-picker
npm install react-native-chart-kit
npm install react-native-gesture-handler
npm install react-native-reanimated
npm install socket.io-client

# 安装开发工具
npm install -D @types/react-native-vector-icons
npm install -D reactotron-react-native

# 热更新
npm install react-native-code-push
```

#### 1.3.2 iOS配置

```bash
cd ios
pod install
cd ..
```

在 `ios/Podfile` 中添加权限：

```ruby
# 相机和相册权限
permissions_path = File.join(File.dirname(`node --print "require.resolve('react-native-permissions/package.json')"`), "ios")
pod 'Permission-Camera', :path => "#{permissions_path}/Camera"
pod 'Permission-PhotoLibrary', :path => "#{permissions_path}/PhotoLibrary"
```

在 `ios/Info.plist` 中添加：

```xml
<key>NSCameraUsageDescription</key>
<string>需要访问相机以拍照搜题</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>需要访问相册以选择图片</string>
```

#### 1.3.3 Android配置

在 `android/app/src/main/AndroidManifest.xml` 中添加：

```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
```

在 `android/app/build.gradle` 中配置：

```gradle
android {
    defaultConfig {
        minSdkVersion 23
        targetSdkVersion 34
    }
}
```

### 1.4 核心功能实现

#### 1.4.1 tRPC客户端配置

```typescript
// src/services/trpc.ts
import { createTRPCReact } from '@trpc/react-query';
import { httpBatchLink } from '@trpc/client';
import type { AppRouter } from '@server/presentation/routers';
import { getAuthToken } from '../utils/storage';

export const trpc = createTRPCReact<AppRouter>();

export const trpcClient = trpc.createClient({
  links: [
    httpBatchLink({
      url: 'http://localhost:3000/trpc',
      
      async headers() {
        const token = await getAuthToken();
        return {
          authorization: token ? `Bearer ${token}` : '',
        };
      },
      
      // 请求拦截
      async fetch(url, options) {
        try {
          const response = await fetch(url, {
            ...options,
            credentials: 'include',
          });
          
          // 401错误处理
          if (response.status === 401) {
            // 清除认证信息
            await clearAuthData();
            // 跳转登录页
            // navigation.navigate('Login');
          }
          
          return response;
        } catch (error) {
          console.error('请求错误:', error);
          throw error;
        }
      },
    }),
  ],
});
```

#### 1.4.2 本地存储工具

```typescript
// src/utils/storage.ts
import AsyncStorage from '@react-native-async-storage/async-storage';

const KEYS = {
  AUTH_TOKEN: '@auth_token',
  USER_INFO: '@user_info',
  THEME: '@theme',
  LANGUAGE: '@language',
  PRACTICE_HISTORY: '@practice_history',
};

// 认证Token
export const saveAuthToken = async (token: string) => {
  await AsyncStorage.setItem(KEYS.AUTH_TOKEN, token);
};

export const getAuthToken = async () => {
  return await AsyncStorage.getItem(KEYS.AUTH_TOKEN);
};

export const removeAuthToken = async () => {
  await AsyncStorage.removeItem(KEYS.AUTH_TOKEN);
};

// 用户信息
export const saveUserInfo = async (user: any) => {
  await AsyncStorage.setItem(KEYS.USER_INFO, JSON.stringify(user));
};

export const getUserInfo = async () => {
  const data = await AsyncStorage.getItem(KEYS.USER_INFO);
  return data ? JSON.parse(data) : null;
};

// 清除所有认证数据
export const clearAuthData = async () => {
  await Promise.all([
    removeAuthToken(),
    AsyncStorage.removeItem(KEYS.USER_INFO),
  ]);
};
```

#### 1.4.3 认证页面示例

```typescript
// src/screens/auth/LoginScreen.tsx
import React, { useState } from 'react';
import { View, StyleSheet } from 'react-native';
import { TextInput, Button, Text } from 'react-native-paper';
import { trpc } from '../../services/trpc';
import { saveAuthToken, saveUserInfo } from '../../utils/storage';
import { useAppDispatch } from '../../hooks/useAuth';
import { setToken, setUser } from '../../store/slices/authSlice';

export const LoginScreen = ({ navigation }) => {
  const [identifier, setIdentifier] = useState('');
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  
  const dispatch = useAppDispatch();
  const loginMutation = trpc.auth.login.useMutation();
  
  const handleLogin = async () => {
    if (!identifier || !password) {
      setError('请输入用户名和密码');
      return;
    }
    
    setLoading(true);
    setError('');
    
    try {
      const result = await loginMutation.mutateAsync({
        identifier,
        password,
      });
      
      // 保存认证信息
      await saveAuthToken(result.token);
      await saveUserInfo(result.user);
      
      // 更新Redux状态
      dispatch(setToken(result.token));
      dispatch(setUser(result.user));
      
      // 跳转到主页
      navigation.replace('Main');
    } catch (err) {
      setError(err.message || '登录失败');
    } finally {
      setLoading(false);
    }
  };
  
  return (
    <View style={styles.container}>
      <Text variant="headlineLarge" style={styles.title}>
        AI智能题库
      </Text>
      
      <TextInput
        label="用户名或邮箱"
        value={identifier}
        onChangeText={setIdentifier}
        style={styles.input}
        autoCapitalize="none"
      />
      
      <TextInput
        label="密码"
        value={password}
        onChangeText={setPassword}
        secureTextEntry
        style={styles.input}
      />
      
      {error ? (
        <Text style={styles.error}>{error}</Text>
      ) : null}
      
      <Button
        mode="contained"
        onPress={handleLogin}
        loading={loading}
        disabled={loading}
        style={styles.button}
      >
        登录
      </Button>
      
      <Button
        mode="text"
        onPress={() => navigation.navigate('Register')}
      >
        还没有账号？立即注册
      </Button>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    padding: 20,
    justifyContent: 'center',
  },
  title: {
    textAlign: 'center',
    marginBottom: 40,
  },
  input: {
    marginBottom: 16,
  },
  button: {
    marginTop: 8,
    marginBottom: 16,
  },
  error: {
    color: 'red',
    marginBottom: 16,
    textAlign: 'center',
  },
});
```

#### 1.4.4 答题页面示例

```typescript
// src/screens/practice/QuestionScreen.tsx
import React, { useState, useEffect } from 'react';
import { View, ScrollView, StyleSheet } from 'react-native';
import { Button, Card, RadioButton, Checkbox, Text } from 'react-native-paper';
import { trpc } from '../../services/trpc';

export const QuestionScreen = ({ route, navigation }) => {
  const { practiceId } = route.params;
  const [currentIndex, setCurrentIndex] = useState(0);
  const [answers, setAnswers] = useState({});
  const [showAnswer, setShowAnswer] = useState(false);
  
  const { data: practice } = trpc.practice.getById.useQuery({ id: practiceId });
  const submitAnswerMutation = trpc.practice.submitAnswer.useMutation();
  
  const currentQuestion = practice?.questions[currentIndex];
  
  const handleSelectOption = (optionId: string) => {
    if (currentQuestion.type === 'MULTIPLE') {
      // 多选题
      const currentAnswers = answers[currentQuestion.id] || [];
      const newAnswers = currentAnswers.includes(optionId)
        ? currentAnswers.filter(id => id !== optionId)
        : [...currentAnswers, optionId];
      setAnswers({ ...answers, [currentQuestion.id]: newAnswers });
    } else {
      // 单选题
      setAnswers({ ...answers, [currentQuestion.id]: optionId });
    }
  };
  
  const handleSubmit = async () => {
    await submitAnswerMutation.mutateAsync({
      practiceId,
      questionId: currentQuestion.id,
      answer: answers[currentQuestion.id],
    });
    
    setShowAnswer(true);
  };
  
  const handleNext = () => {
    setShowAnswer(false);
    if (currentIndex < practice.questions.length - 1) {
      setCurrentIndex(currentIndex + 1);
    } else {
      navigation.navigate('Result', { practiceId });
    }
  };
  
  if (!currentQuestion) {
    return <Text>加载中...</Text>;
  }
  
  return (
    <ScrollView style={styles.container}>
      <Card style={styles.card}>
        <Card.Content>
          <Text variant="titleMedium">
            题目 {currentIndex + 1}/{practice.questions.length}
          </Text>
          
          <Text variant="bodyLarge" style={styles.question}>
            {currentQuestion.content}
          </Text>
          
          {currentQuestion.type === 'SINGLE' && (
            <RadioButton.Group
              onValueChange={handleSelectOption}
              value={answers[currentQuestion.id] || ''}
            >
              {currentQuestion.options.map((option) => (
                <RadioButton.Item
                  key={option.id}
                  label={option.content}
                  value={option.id}
                  style={styles.option}
                />
              ))}
            </RadioButton.Group>
          )}
          
          {currentQuestion.type === 'MULTIPLE' && (
            currentQuestion.options.map((option) => (
              <Checkbox.Item
                key={option.id}
                label={option.content}
                status={
                  (answers[currentQuestion.id] || []).includes(option.id)
                    ? 'checked'
                    : 'unchecked'
                }
                onPress={() => handleSelectOption(option.id)}
                style={styles.option}
              />
            ))
          )}
          
          {showAnswer && (
            <View style={styles.answerSection}>
              <Text variant="titleMedium" style={styles.correctAnswer}>
                正确答案: {currentQuestion.correctAnswer}
              </Text>
              <Text variant="bodyMedium" style={styles.explanation}>
                {currentQuestion.explanation}
              </Text>
            </View>
          )}
        </Card.Content>
        
        <Card.Actions>
          {!showAnswer ? (
            <Button mode="contained" onPress={handleSubmit}>
              提交答案
            </Button>
          ) : (
            <Button mode="contained" onPress={handleNext}>
              {currentIndex < practice.questions.length - 1 ? '下一题' : '查看结果'}
            </Button>
          )}
        </Card.Actions>
      </Card>
    </ScrollView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    padding: 16,
  },
  card: {
    marginBottom: 16,
  },
  question: {
    marginVertical: 16,
  },
  option: {
    marginVertical: 4,
  },
  answerSection: {
    marginTop: 16,
    padding: 16,
    backgroundColor: '#f5f5f5',
    borderRadius: 8,
  },
  correctAnswer: {
    color: '#52c41a',
    marginBottom: 8,
  },
  explanation: {
    color: '#666',
  },
});
```

### 1.5 导航配置

```typescript
// src/navigation/RootNavigator.tsx
import React, { useEffect, useState } from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { useAppSelector } from '../hooks/useAuth';
import { getAuthToken } from '../utils/storage';
import { LoginScreen, RegisterScreen } from '../screens/auth';
import { MainTabNavigator } from './MainTabNavigator';
import { LoadingScreen } from '../screens/LoadingScreen';

const Stack = createNativeStackNavigator();

export const RootNavigator = () => {
  const { token } = useAppSelector((state) => state.auth);
  const [isLoading, setIsLoading] = useState(true);
  const [hasToken, setHasToken] = useState(false);
  
  useEffect(() => {
    checkAuth();
  }, []);
  
  const checkAuth = async () => {
    try {
      const savedToken = await getAuthToken();
      setHasToken(!!savedToken);
    } catch (error) {
      console.error('检查认证状态失败:', error);
    } finally {
      setIsLoading(false);
    }
  };
  
  if (isLoading) {
    return <LoadingScreen />;
  }
  
  return (
    <NavigationContainer>
      <Stack.Navigator screenOptions={{ headerShown: false }}>
        {!token && !hasToken ? (
          <>
            <Stack.Screen name="Login" component={LoginScreen} />
            <Stack.Screen name="Register" component={RegisterScreen} />
          </>
        ) : (
          <Stack.Screen name="Main" component={MainTabNavigator} />
        )}
      </Stack.Navigator>
    </NavigationContainer>
  );
};
```

### 1.6 运行项目

```bash
# iOS
npm run ios

# Android
npm run android

# 清除缓存
npm start -- --reset-cache
```

---

## 2. Web静态页面

### 2.1 项目概述

**位置：** `html-pages/`

**技术栈：**
- HTML5
- CSS3 (Flexbox + Grid)
- JavaScript ES6+
- 响应式设计

**已实现功能：**
- ✅ 5种题型页面（单选、多选、判断、填空、简答）
- ✅ 背题模式
- ✅ 主题切换（浅色/深色/护眼）
- ✅ 答题卡
- ✅ 倒计时
- ✅ 自动保存

### 2.2 文件结构

```
html-pages/
├── index.html                # 首页导航
├── answer-choice.html        # 单选题页面
├── answer-multiple.html      # 多选题页面
├── answer-judge.html         # 判断题页面
├── answer-fill.html          # 填空题页面
├── answer-essay.html         # 简答题页面
├── answer-unanswered.html    # 未答题状态
├── memorize.html             # 背题模式
├── memorize-settings.html    # 背题设置
│
├── css/
│   ├── answer.css           # 统一样式
│   ├── memorize.css         # 背题模式样式
│   └── themes.css           # 主题样式
│
├── js/
│   ├── answer.js            # 核心交互
│   ├── multiple-choice.js   # 多选题逻辑
│   ├── memorize.js          # 背题模式逻辑
│   └── theme.js             # 主题切换逻辑
│
└── images/                  # 图片资源
```

### 2.3 核心功能

#### 2.3.1 答题卡功能

```javascript
// js/answer.js
class AnswerCard {
  constructor() {
    this.questions = [];
    this.currentIndex = 0;
    this.answers = {};
  }
  
  // 显示答题卡
  show() {
    const overlay = document.getElementById('answer-card-overlay');
    overlay.classList.add('active');
    this.render();
  }
  
  // 渲染答题卡
  render() {
    const container = document.getElementById('answer-card-grid');
    container.innerHTML = '';
    
    this.questions.forEach((question, index) => {
      const item = document.createElement('div');
      item.className = 'answer-card-item';
      
      if (index === this.currentIndex) {
        item.classList.add('current');
      }
      
      if (this.answers[question.id]) {
        item.classList.add('answered');
      }
      
      item.textContent = index + 1;
      item.onclick = () => this.jumpTo(index);
      
      container.appendChild(item);
    });
  }
  
  // 跳转到指定题目
  jumpTo(index) {
    this.currentIndex = index;
    this.hide();
    loadQuestion(this.questions[index]);
  }
}
```

#### 2.3.2 倒计时功能

```javascript
// js/answer.js
class Timer {
  constructor(duration, onTick, onEnd) {
    this.duration = duration; // 秒
    this.remaining = duration;
    this.onTick = onTick;
    this.onEnd = onEnd;
    this.interval = null;
  }
  
  start() {
    this.interval = setInterval(() => {
      this.remaining--;
      
      // 更新显示
      this.onTick(this.remaining);
      
      // 时间不足警告（最后5分钟）
      if (this.remaining === 300) {
        alert('还剩5分钟！');
        document.getElementById('timer').classList.add('warning');
      }
      
      // 时间到
      if (this.remaining <= 0) {
        this.stop();
        this.onEnd();
      }
    }, 1000);
  }
  
  stop() {
    if (this.interval) {
      clearInterval(this.interval);
      this.interval = null;
    }
  }
  
  formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = seconds % 60;
    
    return `${hours.toString().padStart(2, '0')}:${
      minutes.toString().padStart(2, '0')}:${
      secs.toString().padStart(2, '0')}`;
  }
}
```

#### 2.3.3 主题切换

```javascript
// js/theme.js
const THEMES = {
  LIGHT: 'light',
  DARK: 'dark',
  GREEN: 'green',
};

class ThemeManager {
  constructor() {
    this.currentTheme = this.loadTheme();
    this.apply(this.currentTheme);
  }
  
  // 应用主题
  apply(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    this.currentTheme = theme;
    this.saveTheme(theme);
  }
  
  // 切换主题
  toggle() {
    const themes = Object.values(THEMES);
    const currentIndex = themes.indexOf(this.currentTheme);
    const nextIndex = (currentIndex + 1) % themes.length;
    this.apply(themes[nextIndex]);
  }
  
  // 保存到本地存储
  saveTheme(theme) {
    localStorage.setItem('theme', theme);
  }
  
  // 从本地存储加载
  loadTheme() {
    return localStorage.getItem('theme') || THEMES.LIGHT;
  }
}
```

#### 2.3.4 自动保存

```javascript
// js/answer.js
class AutoSave {
  constructor(interval = 30000) { // 默认30秒
    this.interval = interval;
    this.timer = null;
  }
  
  start(callback) {
    this.timer = setInterval(() => {
      callback();
      console.log('自动保存答案...');
    }, this.interval);
  }
  
  stop() {
    if (this.timer) {
      clearInterval(this.timer);
      this.timer = null;
    }
  }
  
  saveNow() {
    // 保存到localStorage
    const data = {
      answers: this.answers,
      currentIndex: this.currentIndex,
      timestamp: Date.now(),
    };
    localStorage.setItem('practice_data', JSON.stringify(data));
  }
  
  restore() {
    const data = localStorage.getItem('practice_data');
    if (data) {
      return JSON.parse(data);
    }
    return null;
  }
}
```

### 2.4 样式设计

#### 2.4.1 主题配色

```css
/* css/themes.css */

/* 浅色模式 */
:root[data-theme="light"] {
  --primary-color: #4A90E2;
  --error-color: #FF6B6B;
  --success-color: #52C41A;
  --background-color: #F5F7FA;
  --card-background: #FFFFFF;
  --text-color: #333333;
  --border-color: #E8E8E8;
}

/* 深色模式 */
:root[data-theme="dark"] {
  --primary-color: #1890FF;
  --error-color: #FF4D4F;
  --success-color: #52C41A;
  --background-color: #141414;
  --card-background: #1F1F1F;
  --text-color: #E8E8E8;
  --border-color: #303030;
}

/* 护眼模式 */
:root[data-theme="green"] {
  --primary-color: #52C41A;
  --error-color: #FF6B6B;
  --success-color: #73D13D;
  --background-color: #F0F5F0;
  --card-background: #FAFDF5;
  --text-color: #333333;
  --border-color: #D9F7BE;
}
```

#### 2.4.2 响应式设计

```css
/* css/answer.css */

/* 移动端优先 */
.container {
  width: 100%;
  padding: 16px;
}

/* 平板 */
@media screen and (min-width: 768px) {
  .container {
    max-width: 750px;
    margin: 0 auto;
    padding: 24px;
  }
}

/* 桌面 */
@media screen and (min-width: 1024px) {
  .container {
    max-width: 1000px;
    padding: 32px;
  }
}
```

### 2.5 使用方法

```bash
# 使用本地服务器
python -m http.server 8000

# 或使用Node.js
npx http-server -p 8000

# 访问
open http://localhost:8000
```

---

## 3. Web管理后台（规划中）

### 3.1 技术选型

**推荐技术栈：**
- React 18 + TypeScript
- React Router 6
- Redux Toolkit
- Ant Design / Material-UI
- React Query
- tRPC Client
- ECharts / Recharts（图表）

### 3.2 功能规划

#### 教师端核心功能

1. **题库管理**
   - 题目CRUD
   - 批量导入/导出
   - 题目分类管理
   - 智能组卷

2. **考试管理**
   - 创建考试
   - 监考管理
   - 成绩查询
   - 数据分析

3. **学员管理**
   - 学员列表
   - 学习进度
   - 成绩统计
   - 学习报告

4. **数据分析**
   - 整体数据Dashboard
   - 题目正确率分析
   - 学员能力分析
   - 知识点掌握度

### 3.3 目录结构（规划）

```
packages/web-admin/
├── src/
│   ├── pages/
│   │   ├── Dashboard/            # 仪表板
│   │   ├── Questions/            # 题库管理
│   │   ├── Exams/                # 考试管理
│   │   ├── Students/             # 学员管理
│   │   └── Analytics/            # 数据分析
│   │
│   ├── components/
│   │   ├── QuestionEditor/       # 题目编辑器
│   │   ├── PaperGenerator/       # 组卷工具
│   │   └── DataCharts/           # 图表组件
│   │
│   ├── layouts/
│   │   └── AdminLayout/          # 后台布局
│   │
│   ├── services/
│   │   └── trpc.ts               # tRPC客户端
│   │
│   └── App.tsx
│
├── package.json
└── tsconfig.json
```

---

## 4. UI设计规范

### 4.1 设计原则

1. **移动优先** - 优先考虑移动端体验
2. **简洁明了** - 界面清晰，层次分明
3. **一致性** - 保持设计风格统一
4. **易用性** - 交互友好，操作流畅

### 4.2 颜色规范

```javascript
const Colors = {
  // 主色
  primary: '#4A90E2',
  primaryLight: '#6BA7E8',
  primaryDark: '#3A7AC8',
  
  // 功能色
  success: '#52C41A',
  warning: '#FAAD14',
  error: '#FF6B6B',
  info: '#1890FF',
  
  // 中性色
  text: '#333333',
  textSecondary: '#666666',
  textLight: '#999999',
  border: '#E8E8E8',
  background: '#F5F7FA',
  white: '#FFFFFF',
  
  // 语义色
  correct: '#52C41A',  // 正确答案
  wrong: '#FF6B6B',    // 错误答案
  unanswered: '#999999', // 未答题
};
```

### 4.3 间距规范

```javascript
const Spacing = {
  xs: 4,
  sm: 8,
  md: 16,
  lg: 24,
  xl: 32,
  xxl: 48,
};
```

### 4.4 字体规范

```javascript
const Typography = {
  // 标题
  h1: { fontSize: 32, fontWeight: 'bold' },
  h2: { fontSize: 28, fontWeight: 'bold' },
  h3: { fontSize: 24, fontWeight: 'bold' },
  h4: { fontSize: 20, fontWeight: 'bold' },
  
  // 正文
  body: { fontSize: 16, fontWeight: 'normal' },
  bodySmall: { fontSize: 14, fontWeight: 'normal' },
  caption: { fontSize: 12, fontWeight: 'normal' },
};
```

### 4.5 组件规范

#### 按钮

```typescript
// 主按钮
<Button mode="contained" color="primary">
  确定
</Button>

// 次按钮
<Button mode="outlined" color="primary">
  取消
</Button>

// 文本按钮
<Button mode="text" color="primary">
  了解更多
</Button>
```

#### 卡片

```typescript
<Card style={styles.card}>
  <Card.Content>
    {/* 内容 */}
  </Card.Content>
  <Card.Actions>
    {/* 操作按钮 */}
  </Card.Actions>
</Card>
```

---

## 5. 开发工作流

### 5.1 开发流程

```bash
# 1. 创建功能分支
git checkout -b feature/question-practice

# 2. 开发功能
# 编写代码...

# 3. 运行测试
npm run test

# 4. 代码格式化
npm run format
npm run lint

# 5. 提交代码
git add .
git commit -m "feat: 添加练习模式"

# 6. 推送到远程
git push origin feature/question-practice

# 7. 创建Pull Request
```

### 5.2 代码规范

#### 文件命名

```
- 组件: PascalCase (QuestionCard.tsx)
- 工具: camelCase (formatters.ts)
- 常量: UPPER_SNAKE_CASE (API_CONFIG)
- 样式: kebab-case (answer-card.css)
```

#### 组件规范

```typescript
// ✅ 推荐写法
import React, { useState, useEffect } from 'react';
import { View, Text, StyleSheet } from 'react-native';

interface Props {
  title: string;
  onPress: () => void;
}

export const MyComponent: React.FC<Props> = ({ title, onPress }) => {
  const [state, setState] = useState(false);
  
  useEffect(() => {
    // 副作用
  }, []);
  
  return (
    <View style={styles.container}>
      <Text>{title}</Text>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
});
```

### 5.3 Git提交规范

```
feat: 新功能
fix: Bug修复
docs: 文档更新
style: 代码格式
refactor: 重构
test: 测试
chore: 构建/工具
perf: 性能优化
```

### 5.4 测试

```bash
# 单元测试
npm run test

# E2E测试
npm run test:e2e

# 测试覆盖率
npm run test:cov
```

### 5.5 发布

#### iOS发布

```bash
cd ios
bundle exec fastlane beta  # TestFlight
bundle exec fastlane release  # App Store
```

#### Android发布

```bash
cd android
./gradlew assembleRelease
./gradlew bundleRelease
```

---

## 📚 附录

### A. 常用命令

```bash
# 移动端
npm run ios
npm run android
npm start -- --reset-cache

# Web
python -m http.server 8000
npx http-server -p 8000

# 测试
npm run test
npm run lint
npm run format
```

### B. 常见问题

**Q: Metro bundler缓存问题？**
```bash
npm start -- --reset-cache
```

**Q: iOS构建失败？**
```bash
cd ios && pod deintegrate && pod install && cd ..
```

**Q: Android构建失败？**
```bash
cd android && ./gradlew clean && cd ..
```

**Q: tRPC类型提示不工作？**
```bash
cd packages/server && npm run build
```

### C. 参考资源

- [React Native文档](https://reactnative.dev/)
- [React Navigation文档](https://reactnavigation.org/)
- [Redux Toolkit文档](https://redux-toolkit.js.org/)
- [tRPC文档](https://trpc.io/)
- [React Native Paper文档](https://reactnativepaper.com/)

---

**文档版本：** V2.0  
**最后更新：** 2025-10-14  
**维护团队：** Frontend Team


