# AI智能题库系统 - 项目需求总结

## 文档信息

| 项目         | 内容                       |
| ------------ | -------------------------- |
| **项目名称** | AI智能题库系统             |
| **版本**     | V2.0（React Native移动版） |
| **更新日期** | 2025-10-13                 |
| **文档状态** | 需求确认完成               |

---

## 一、核心需求确认

### ✅ 已确认的关键决策

#### 1. AI模型选择：**DeepSeek（国产）**

**选择理由：**

- 💰 **极高性价比**：¥2/百万tokens，仅为GPT-4的 1/100
- 🇨🇳 **国产模型**：数据合规，无隐私风险
- 🚀 **性能优秀**：接近GPT-4，中文理解能力强
- ⚡ **访问稳定**：国内访问速度快，响应时间短

**成本对比：**
| 方案 | 月成本估算（1000用户） |
| --------- | ---------------------- |
| GPT-4 | $150/月 |
| DeepSeek | $95/月（¥680） |
| **节省** | **40%** |

#### 2. 技术架构：**全栈TypeScript统一架构**

```
移动端：React Native（学员端）
  ├── iOS原生应用
  ├── Android原生应用
  └── 跨平台统一开发

Web端：React（老师端）
  ├── PC端管理后台
  └── 响应式设计

后端：NestJS + tRPC（统一后端服务）
  ├── 业务逻辑处理
  ├── AI服务模块（DeepSeek API）
  ├── 文档解析模块
  ├── 题目生成模块
  ├── AI批改模块
  ├── RAG问答模块
  └── 任务队列（Bull + Redis）

技术栈统一：全TypeScript
  ├── 前端：TypeScript + React/React Native
  ├── 后端：TypeScript + NestJS
  └── 类型共享：端到端类型安全
```

#### 3. 产品端口划分

| 端口   | 目标用户       | 核心功能                           | 访问方式                |
| ------ | -------------- | ---------------------------------- | ----------------------- |
| 学员端 | 企业员工、学生 | 学习、练习、考试、答疑、错题管理   | iOS/Android原生移动应用 |
| 老师端 | 讲师、培训师   | 资料上传、AI出题、组卷、批改、分析 | PC Web管理后台          |

---

## 二、功能需求清单

### 🎯 核心AI功能（优先级P0）

#### 1. AI主观题批改

- **输入**：学生答案、标准答案、评分标准
- **输出**：分数、分点得分、评语、建议、置信度
- **特点**：语义理解、分点给分、人工复核机制

#### 2. AI智能出题

- **方式1**：根据知识点描述生成题目
- **方式2**：上传资料（PDF/Word/PPT），AI自动生成题目
- **支持题型**：单选、多选、判断、填空、简答、论述、编程、案例分析

#### 3. **AI资料解析与批量生成（新增）⭐**

- **资料上传**：支持PDF、Word、PPT、图片等格式
- **智能解析**：自动提取章节、知识点、重点内容
- **批量生成**：一键生成覆盖所有知识点的题目集合
- **自动组卷**：基于资料内容，AI自动组织完整试卷
- **知识点映射**：将题目自动关联到知识点树
- **进度显示**：实时显示解析和生成进度

#### 4. AI学习路径推荐

- 基于学员答题数据和学习行为
- 使用IRT模型计算知识点掌握度
- 动态调整推荐内容和难度

#### 5. AI对话式答疑

- RAG架构（检索增强生成）
- 7x24小时智能答疑
- 多轮对话支持
- 题目解析自动生成

#### 6. AI错题分析与诊断

- 自动收集错题
- 知识点诊断定位薄弱环节
- 错因分析
- 针对性学习建议

### 📋 业务功能模块

#### 学员端功能

1. **在线学习**
   - 章节练习、随机练习、专项练习
   - 错题练习、收藏练习
   - AI推荐练习

2. **考试测验**
   - 参加正式考试
   - 实时倒计时
   - 自动保存答题进度
   - 防作弊机制（切屏检测）

3. **成绩与报告**
   - 查看成绩和排名
   - 个人学习报告
   - 能力雷达图
   - 学习轨迹

4. **AI答疑**
   - 智能对话问答
   - 题目讲解
   - 知识点解析

5. **错题管理**
   - 错题本自动收集
   - 错题分类
   - 掌握状态标记

6. **社交互动**
   - 排行榜
   - 讨论区
   - 学习打卡

#### 老师端功能

1. **资料管理（核心功能）⭐**
   - 上传学习资料（PDF、Word、PPT、图片）
   - AI自动解析资料结构
   - 提取知识点
   - 一键生成题目和试卷
   - 进度实时显示

2. **题库管理**
   - 题目录入（8种题型）
   - 富文本编辑
   - 题目分类和标签
   - 批量导入导出
   - AI辅助出题
   - 题目审核流程

3. **组卷管理**
   - 手动选题组卷
   - AI智能组卷
   - 试卷模板
   - 多套试卷生成（AB卷）

4. **考试管理**
   - 创建考试
   - 实时监控
   - 防作弊设置
   - 补考管理

5. **批改评分**
   - 客观题自动批改
   - 主观题AI批改
   - 人工复核
   - 评分调整

6. **数据分析**
   - 学员成绩统计
   - 题目质量分析
   - 知识点掌握度分析
   - 学员能力分析
   - 自定义报表

---

## 三、技术架构详情

### 3.1 完整技术栈

#### 移动端技术栈（学员端）

```
React Native + TypeScript 5
├── 导航：React Navigation 6
├── 状态管理：Redux Toolkit / Zustand
├── 数据获取：React Query + tRPC Client
├── UI组件库：React Native Paper / NativeBase
├── 表单管理：React Hook Form
├── 图表可视化：react-native-chart-kit
├── 本地存储：AsyncStorage / MMKV
├── 热更新：CodePush
└── 原生功能：
    ├── 相机：react-native-image-picker
    ├── 推送：react-native-push-notification
    └── 生物识别：react-native-biometrics
```

#### Web端技术栈（老师端）

```
React 18 + TypeScript 5
├── 状态管理：Redux Toolkit
├── 数据获取：React Query + tRPC Client
├── 样式方案：Tailwind CSS
├── UI组件库：Ant Design Pro
├── 表单管理：React Hook Form
├── 富文本编辑：Tiptap
└── 数据可视化：ECharts
```

#### 后端技术栈（NestJS）

```
NestJS 10 + TypeScript 5 + PostgreSQL 16
├── ORM：Prisma 5
├── 缓存/队列：Redis 7 + Bull
├── WebSocket：Socket.io 4
├── 认证：Passport JWT
├── 文件存储：AWS S3 / 阿里OSS
└── AI集成：OpenAI SDK（兼容DeepSeek）
```

#### AI服务技术栈（NestJS统一）

```
NestJS 10 + TypeScript 5（AI模块）
├── LLM：DeepSeek API（OpenAI兼容SDK）
├── AI框架：LangChain.js
├── 向量数据库：Pinecone（官方JS SDK）
├── 文档解析：
│   ├── PDF：pdf-parse
│   ├── Word：mammoth
│   ├── PPT：pptx-parser
│   └── OCR：tesseract.js
├── 任务队列：Bull + Redis
└── 嵌入模型：@xenova/transformers
```

### 3.2 平台适配方案

#### 移动端（学员端）

**iOS平台**：
- 支持 iOS 13.0+
- iPhone 和 iPad 界面适配
- Safe Area 适配
- 支持 Face ID / Touch ID

**Android平台**：
- 支持 Android 6.0+ (API 23+)
- 屏幕尺寸：4.7寸-6.7寸
- 分辨率：720p到2K+自适应
- Material Design 风格

#### Web端（老师端）

**响应式断点：**

```css
tablet: 768px-1024px
desktop: 1024px-1440px
wide: 1440px+
```

### 3.3 项目结构（全TypeScript统一）

```
project/
├── mobile/                       # React Native移动端（学员端）
│   ├── src/
│   │   ├── screens/              # 页面组件
│   │   ├── components/           # 通用组件
│   │   ├── navigation/           # 导航配置
│   │   ├── store/                # Redux状态管理
│   │   ├── services/             # API服务
│   │   ├── utils/                # 工具函数
│   │   └── assets/               # 静态资源
│   ├── ios/                      # iOS原生代码
│   ├── android/                  # Android原生代码
│   └── package.json
├── web/                          # React Web端（老师端）
│   ├── src/
│   │   ├── pages/                # 页面组件
│   │   ├── components/           # 通用组件
│   │   ├── layouts/              # 布局组件
│   │   ├── store/                # Redux状态管理
│   │   ├── services/             # API服务
│   │   └── utils/                # 工具函数
│   └── package.json
├── packages/                     # 共享包（Monorepo）
│   ├── shared/                   # 共享类型和工具
│   │   ├── types/                # TypeScript类型
│   │   ├── constants/            # 常量
│   │   └── utils/                # 工具函数
│   └── server/                  # NestJS后端（统一）
│       ├── src/
│       │   ├── modules/
│       │   │   ├── user/         # 用户模块
│       │   │   ├── question/     # 题库模块
│       │   │   ├── exam/         # 考试模块
│       │   │   ├── ai/           # AI核心模块 ⭐
│       │   │   │   ├── deepseek.service.ts
│       │   │   │   └── embedding.service.ts
│       │   │   ├── document/     # 文档解析模块 ⭐
│       │   │   │   ├── pdf.service.ts
│       │   │   │   ├── docx.service.ts
│       │   │   │   └── ocr.service.ts
│       │   │   ├── question-generation/  # 题目生成 ⭐
│       │   │   ├── grading/      # AI批改模块 ⭐
│       │   │   ├── rag/          # RAG问答模块 ⭐
│       │   │   └── recommendation/  # 学习推荐 ⭐
│       │   ├── trpc/             # tRPC配置
│       │   ├── common/
│       │   └── config/
│       ├── prisma/
│       └── package.json
└── docs/                         # 文档目录
```

---

## 四、数据库设计要点

### 核心表结构

**用户与组织：**

- `organizations` - 企业组织
- `departments` - 部门
- `users` - 用户
- `roles` - 角色
- `permissions` - 权限

**题库核心：**

- `questions` - 题目主表
- `question_categories` - 题目分类
- `knowledge_points` - 知识点
- `question_tags` - 标签

**资料与生成：**

- `documents` - 学习资料表
- `document_parsing_jobs` - 资料解析任务
- `ai_generated_questions` - AI生成的题目
- `generation_history` - 生成历史记录

**试卷与考试：**

- `papers` - 试卷
- `paper_questions` - 试卷题目关联
- `exams` - 考试
- `exam_records` - 考试记录

**答题与成绩：**

- `answers` - 答题记录
- `scores` - 成绩
- `wrong_questions` - 错题本
- `ai_grading_records` - AI批改记录

---

## 五、开发计划

### 阶段一：MVP版本（1-2个月）

**Week 1-2：环境搭建**

- [x] 项目初始化
- [ ] DeepSeek API测试
- [ ] 数据库设计
- [ ] 基础架构搭建

**Week 3-6：核心功能**

- [ ] 用户管理（登录、权限）
- [ ] 题库基础管理
- [ ] AI主观题批改
- [ ] 简单答题功能

**Week 7-8：测试与优化**

- [ ] 功能测试
- [ ] 性能优化
- [ ] 用户体验优化

### 阶段二：AI增强版（2-3个月）

**新增功能：**

- [ ] AI从资料生成题目（核心功能）
- [ ] AI智能组卷
- [ ] AI对话答疑
- [ ] 错题分析
- [ ] 学习路径推荐
- [ ] 移动端适配

### 阶段三：完整版（2-3个月）

**完善功能：**

- [ ] 社交功能
- [ ] 高级数据分析
- [ ] 防作弊增强
- [ ] 性能优化
- [ ] 企业级功能

---

## 六、成本预算

### 6.1 云服务成本（月度）

| 服务             | 配置         | 月成本      |
| ---------------- | ------------ | ----------- |
| **DeepSeek API** | 5000万tokens | ¥100（$14） |
| **Embedding**    | 5000万tokens | $6.5        |
| **Pinecone**     | 100万向量    | $70         |
| **Redis Cloud**  | 1GB          | $5          |
| **PostgreSQL**   | 2核4G        | $20         |
| **服务器**       | 4核8G × 2    | $80         |
| **对象存储**     | 100GB        | $5          |
| **总计**         | -            | **$200/月** |

### 6.2 开发成本估算

| 角色       | 人数 | 周期  | 成本估算   |
| ---------- | ---- | ----- | ---------- |
| 产品经理   | 1    | 8个月 | 按实际情况 |
| 前端工程师 | 2    | 8个月 | 按实际情况 |
| 后端工程师 | 2    | 8个月 | 按实际情况 |
| AI工程师   | 1    | 8个月 | 按实际情况 |
| UI设计师   | 1    | 4个月 | 按实际情况 |
| 测试工程师 | 1    | 6个月 | 按实际情况 |

---

## 七、关键文档清单

### 已完成文档

| 文档名称                          | 路径                          | 说明                 |
| --------------------------------- | ----------------------------- | -------------------- |
| **产品需求文档（PRD）**           | `PRD_AI题库系统.md`           | 完整的产品需求说明   |
| **DeepSeek集成方案**              | `DeepSeek集成方案.md`         | DeepSeek详细技术方案 |
| **AI技术实施方案（云服务API版）** | `AI技术实施方案_云服务API.md` | 完整的技术实施指南   |
| **项目需求总结**                  | `项目需求总结.md`（本文档）   | 需求汇总和技术决策   |

### 待创建文档

| 文档名称       | 优先级 | 说明                |
| -------------- | ------ | ------------------- |
| API接口文档    | P0     | 前后端接口规范      |
| 数据库设计文档 | P0     | 详细的表结构设计    |
| UI/UX设计规范  | P1     | 设计系统和规范      |
| 测试计划       | P1     | 测试用例和测试策略  |
| 部署运维手册   | P1     | 部署流程和运维指南  |
| 开发规范文档   | P1     | 代码规范和Git工作流 |

---

## 八、下一步行动

### 立即可以开始

#### 1. 注册服务账号（1天）

- [ ] DeepSeek平台注册并获取API Key
- [ ] Pinecone注册并创建Index
- [ ] 云服务商账号（阿里云/AWS）
- [ ] GitHub仓库创建

#### 2. 本地开发环境（1天）

- [ ] 安装Node.js 20+、Python 3.11+
- [ ] 安装Docker、PostgreSQL、Redis
- [ ] IDE配置（VSCode推荐插件）
- [ ] Git配置

#### 3. 项目初始化（2-3天）

- [ ] 创建React Native移动端项目 ✅
- [ ] 创建React Web管理后台项目
- [ ] 创建NestJS后端项目（含tRPC和AI模块）
- [ ] 配置Monorepo工作空间（pnpm）
- [ ] 配置环境变量
- [ ] 测试DeepSeek API连接
- [ ] 安装AI相关依赖（LangChain.js等）

#### 4. MVP开发启动（Week 1）

- [ ] 数据库表结构设计和创建
- [ ] 用户认证系统
- [ ] 基础题库管理页面
- [ ] DeepSeek集成测试

---

## 九、风险与应对

### 技术风险

| 风险               | 可能性 | 影响 | 应对措施                         |
| ------------------ | ------ | ---- | -------------------------------- |
| DeepSeek API限流   | 中     | 中   | 任务队列、重试机制、备用方案     |
| AI批改准确率不达标 | 中     | 高   | 人工复核、持续优化Prompt、多模型 |
| 性能瓶颈           | 中     | 中   | 缓存优化、CDN加速、服务器扩容    |
| 文档解析失败       | 低     | 中   | 多种解析方案、人工兜底           |

### 业务风险

| 风险         | 可能性 | 影响 | 应对措施              |
| ------------ | ------ | ---- | --------------------- |
| 需求变更频繁 | 高     | 中   | 敏捷开发、快速迭代    |
| 用户接受度低 | 中     | 高   | MVP快速验证、用户调研 |
| 成本超预算   | 中     | 中   | 成本监控、按需扩容    |

---

## 十、成功指标（KPI）

### 产品指标（首年）

- 注册用户数：10,000+
- 付费企业数：50+
- 月活跃用户：5,000+
- 用户留存率：>60%

### 技术指标

- AI批改准确率：>85%
- 页面加载时间：<2秒
- API响应时间：<500ms
- 系统可用率：>99.9%

### 业务指标

- 题库规模：10万+题目
- 月度考试场次：1000+
- 客户满意度：>4.5/5
- AI调用成本：<¥500/月

---

## 附录：联系方式与资源

### 重要链接

- DeepSeek官网：https://platform.deepseek.com/
- DeepSeek API文档：https://platform.deepseek.com/docs
- Next.js文档：https://nextjs.org/docs
- NestJS文档：https://docs.nestjs.com/
- LangChain文档：https://docs.langchain.com/

### 技术社区

- DeepSeek社区：https://github.com/deepseek-ai
- Next.js中文社区
- NestJS中文社区

---

**文档更新日期：** 2025-10-13  
**版本：** V2.0（React Native移动版）  
**主要变更：** 前端技术栈改为React Native，专注移动端原生体验

**准备开始开发！** 🚀
